<!DOCTYPE html>
<html>
<head>
  <title>Add Product</title>
</head>
<body>

<h2>Add New Footwear Product</h2>

<label>Product Name</label>
<input type="text" id="name"><br><br>

<label>Price</label>
<input type="text" id="price"><br><br>

<label>Description</label>
<textarea id="description"></textarea><br><br>

<label>Product Image</label>
<input type="file" id="imageInput"><br><br>

<button id="uploadBtn">Upload Product</button>

<script>
const cloudName = "dwgtjjoj2";  
const uploadPreset = "footwear_upload";

async function uploadImage(file) {
    const url = `https://api.cloudinary.com/v1_1/${cloudName}/image/upload`;

    const formData = new FormData();
    formData.append("file", file);
    formData.append("upload_preset", uploadPreset);

    const response = await fetch(url, {
        method: "POST",
        body: formData
    });

    const data = await response.json();
    return data.secure_url;
}

async function uploadProduct() {
    const name = document.getElementById("name").value;
    const price = document.getElementById("price").value;
    const description = document.getElementById("description").value;
    const file = document.getElementById("imageInput").files[0];

    if (!file) {
        alert("Please select an image!");
        return;
    }

    const imageUrl = await uploadImage(file);

    const scriptURL = "https://script.google.com/macros/s/AKfycbx61mHqQPxyUjA7naj5bqn-X4KDQiTqaU7VyreLrA9gNDOsQakhvvEW70bv2nHCXmnX/exec";

    await fetch(scriptURL, {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            name: name,
            price: price,
            image: imageUrl,
            description: description
        })
    });

    alert("Product Added Successfully!");
}

document.getElementById("uploadBtn").addEventListener("click", uploadProduct);
</script>

</body>
</html>
