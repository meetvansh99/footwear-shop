<!DOCTYPE html>
<html>
<head>
  <title>Add Product</title>
</head>
<body>

<h2>Add New Footwear Product</h2>

<label>Product Name</label>
<input type="text" id="name"><br><br>

<label>Price</label>
<input type="text" id="price"><br><br>

<label>Description</label>
<textarea id="description"></textarea><br><br>

<label>Product Image</label>
<input type="file" id="imageInput"><br><br>

<button onclick="uploadProduct()">Upload Product</button>

<script>
const cloudName = "dwgtjj0j2";       // tumhara cloudinary cloud name
const uploadPreset = "footwear_upload";

async function uploadImage(file) {
    const url = `https://api.cloudinary.com/v1_1/${cloudName}/image/upload`;

    const formData = new FormData();
    formData.append("file", file);
    formData.append("upload_preset", uploadPreset);

    const response = await fetch(url, {
        method: "POST",
        body: formData
    });

    const data = await response.json();
    return data.secure_url;  // final image URL
}

async function uploadProduct() {
    const name = document.getElementById("name").value;
    const price = document.getElementById("price").value;
    const description = document.getElementById("description").value;
    const file = document.getElementById("imageInput").files[0];

    if (!file) {
        alert("Please select an image!");
        return;
    }

    // Step 1: Upload to Cloudinary
    const imageUrl = await uploadImage(file);

    // Step 2: Send details to Google Sheets API
    const scriptURL = "https://script.google.com/macros/s/AKfycbw9hbO8LfV6S12pfJXlT4yHbr1KhsC9A0PxzuCR4nD0MO7eZyA8XTujEzRts3DBPp8n/exec";


    await fetch(scriptURL, {
        method: "POST",
        body: JSON.stringify({
            name: name,
            price: price,
            image: imageUrl,
            description: description
        })
    });

    alert("Product Added Successfully!");
}
</script>

</body>
</html>
